const employees=document.querySelectorAll(".employee"),employeeList=document.getElementById("employeeList"),main=document.querySelector("main"),overlay=document.querySelector(".overlay"),overlayBtn=document.getElementById("overlayBtn"),searchInput=document.getElementById("searchInput"),searchBtn=document.getElementById("searchBtn");function checkStatus(e){return e.ok?Promise.resolve(e):Promise.reject(new Error(e.statusText))}function generateDetails(e){for(let t=0;t<`${e.results.length}`;t++){let n=e.results[t];employees[t].innerHTML=`\n            <img src="${n.picture.medium}">\n            <div class="employeeDetails">            \n            <h3>${n.name.first} ${n.name.last}</h3>\n            <p>${n.email}</p>\n            <p>${n.location.state}, ${n.location.country}</p>\n            </div>\n        `}return e}function employeeDetail(e){return`\n        <img id="close" src="https://img.icons8.com/metro/26/000000/close-window.png"/>\n        <img id="personImg" src="${e.picture.large}">\n        <h1>${e.name.first} ${e.name.last}</h1>\n        <p>${e.email}</p>\n        <p>${e.location.country}</p>\n        <div class="employeeOtherDetailsOverlay">\n            <p>${e.cell}</p> \n            <p>${e.location.street.number}, ${e.location.street.name}, ${e.location.city}, ${e.location.country}</p> \n            <p>Birthday: ${e.dob.date.substring(0,10)}</p>\n        </div>      \n    `}function closeOverlay(e){e.querySelector("#close").addEventListener("click",()=>{overlay.style.display="none",e.remove()})}function appendToHtml(e){for(let t=0;t<e.results.length;t++)employees[t].addEventListener("click",n=>{let l=e.results[t];const s=document.createElement("div");s.innerHTML=employeeDetail(l),s.classList.add("employeeDetailsOverlay"),overlay.style.display="flex",overlay.style.backgroundColor="rgba(0, 0, 0, 70%)",overlay.insertBefore(s,overlayBtn),closeOverlay(s),overlayBtn.addEventListener("click",n=>{"Prev"==n.target.textContent?(l=e.results[--t],s.innerHTML=employeeDetail(l),n.target.nextElementSibling.classList.contains("d-none")&&n.target.nextElementSibling.classList.remove("d-none"),0==e.results.indexOf(l)&&n.target.classList.add("d-none")):"Next"==n.target.textContent&&(l=e.results[++t],s.innerHTML=employeeDetail(l),n.target.previousElementSibling.classList.contains("d-none")&&n.target.previousElementSibling.classList.remove("d-none"),11==e.results.indexOf(l)&&n.target.classList.add("d-none")),closeOverlay(s)})});return e}function search(){const e=searchInput.value,t=new RegExp(e,"i");employees.forEach(e=>{const n=e.children[1].firstElementChild.textContent;t.test(n)?e.classList.remove("d-none"):e.classList.add("d-none")})}fetch("https://randomuser.me/api?results=12").then(checkStatus).then(e=>e.json()).then(generateDetails).then(appendToHtml).catch(e=>console.log("Looks like there was a problem!",e)),searchBtn.addEventListener("click",search);